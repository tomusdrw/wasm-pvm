(module
  (import "env" "pvm_ptr" (func $pvm_ptr (param i64) (result i64)))
  (import "env" "host_call" (func $host_call (param i64 i64 i64 i64 i64 i64)))
  (memory (export "memory") 1)
  ;; "test-log" at offset 0 (8 bytes)
  (data (i32.const 0) "test-log")
  ;; "Hello from PVM!" at offset 8 (15 bytes)
  (data (i32.const 8) "Hello from PVM!")
  (func (export "main") (param $args_ptr i32) (param $args_len i32) (result i32 i32)
    ;; ecalli 100 = log host call
    ;; r7 = level (3 = INFO)
    ;; r8 = target_ptr (PVM address of "test-log")
    ;; r9 = target_len (8)
    ;; r10 = msg_ptr (PVM address of "Hello from PVM!")
    ;; r11 = msg_len (15)
    (call $host_call
      (i64.const 100)
      (i64.const 3)
      (call $pvm_ptr (i64.const 0))
      (i64.const 8)
      (call $pvm_ptr (i64.const 8))
      (i64.const 15))
    ;; Return result: store 42 at offset 24, return (ptr=24, len=4)
    (i32.store (i32.const 24) (i32.const 42))
    (i32.const 24)
    (i32.const 4)))
